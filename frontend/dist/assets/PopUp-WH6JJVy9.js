import{d as s,u as D,t as E,r as l,j as e,C as R,b as S}from"./index-DjgXxVfn.js";import{G as k,P as T,a as P}from"./index-MxTyqqxA.js";function A(r){return k({tag:"svg",attr:{version:"1.1",viewBox:"0 0 17 17"},child:[{tag:"g",attr:{},child:[]},{tag:"path",attr:{d:"M9.207 8.5l6.646 6.646-0.707 0.707-6.646-6.646-6.646 6.646-0.707-0.707 6.646-6.646-6.647-6.646 0.707-0.707 6.647 6.646 6.646-6.646 0.707 0.707-6.646 6.646z"},child:[]}]})(r)}function O(r){return k({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 15.0006L7.75732 10.758L9.17154 9.34375L12 12.1722L14.8284 9.34375L16.2426 10.758L12 15.0006Z"},child:[]}]})(r)}s.extend(D);s.extend(E);const z=({inputData:r,setInputData:c,date:b,time:v,fullDate:a,setFullDate:j,setDatePicker:C})=>{const[p]=l.useState({date:b,time:v}),f=a.year(),m=a.month();let y=0-s(new Date(f,m,1)).day(),g=new Array(5).fill([]).map(()=>new Array(7).fill([]).map(()=>(y++,s(new Date(f,m,y)).tz("Asia/Kolkata").format("YYYY-MM-DD"))));const h=n=>{j(n==="prev"?s(new Date(a.year(),a.month()-1,a.date())):s(new Date(a.year(),a.month()+1,a.date())))},i=()=>{const n=s().format("YYYY-MM-DD"),u=s().format("hh:mm");c({...r,date:n,time:u})};return e.jsxs("div",{className:"w-[320px] shadow-2xl py-2 absolute bg-white top-14",children:[e.jsxs("div",{className:"flex gap-[4px] p-4 border-b-[1px] ",children:[e.jsx("input",{type:"date",name:"date",id:"date",min:s().format("YYYY-MM-DD"),value:r.date,className:"border p-2 w-full",onChange:n=>{n.preventDefault(),c({...r,date:n.target.value})}}),e.jsx("input",{type:"time",name:"time",id:"time",value:r.time,className:"border p-2 w-full",onChange:n=>{n.preventDefault(),c({...r,time:n.target.value})}})]}),e.jsxs("div",{className:"flex justify-between items-center my-4 text-lg gap-4 font-semibold text-black px-6 ",children:[e.jsx("button",{type:"button",className:"disabled:opacity-40 font-extrabold",disabled:s(new Date(a.year(),a.month()-1,30)).diff(p.date)<0,onClick:()=>h("prev"),children:e.jsx(T,{})}),e.jsx("h1",{children:a.format("YYYY MMMM ")}),e.jsx("button",{type:"button",disabled:s(new Date(a.year(),a.month()+1,a.date())).diff(p.date)<0,onClick:()=>h("next"),children:e.jsx(P,{})})]}),e.jsxs("div",{className:"flex flex-col justify-stretch flex-1 px-6",children:[e.jsx("div",{className:"flex justify-evenly flex-1 mb-1 border-b-[1px] text-sm ",children:["Mo","Tu","We","Th","Fr","Sa","Su"].map((n,u)=>e.jsx("div",{className:"flex-1 text-center p-2 font-semibold",children:n},u))}),g.map((n,u)=>e.jsx("div",{className:"flex justify-evenly flex-1 mb-1 text-sm",children:n.map((d,x)=>{const N=s(d).date();return e.jsx("button",{type:"button",className:`flex-1 h-8 w-8 rounded-full flex justify-center items-center hover:bg-gray-100 cursor-pointer font-medium text-[#000000b9] 
                      disabled:opacity-70
                      ${r.date===s(d).format("YYYY-MM-DD")&&"bg-[#58abd893] hover:bg-[#58abd893]"} `,onClick:()=>{c({...r,date:s(new Date(d)).format("YYYY-MM-DD")})},disabled:s(d).diff(s().format("YYYY-MM-DD"))<0||m!==s(d).month(),children:N},x)})},u))]}),e.jsxs("div",{className:"border-t-[1px] py-2 px-6 text-right text-sm",children:[e.jsx("button",{type:"button",className:"px-6 py-1 text-[#5abbf0] font-bold",onClick:i,children:"Now"}),e.jsx("button",{type:"button",className:"border px-6 py-1 font-bold",onClick:()=>C(!1),children:"Ok"})]})]})},M=[{minutes:15,text:"15 minutes"},{minutes:30,text:"30 minutes"},{minutes:60,text:"1 hour"},{minutes:90,text:"1.30 hours"},{minutes:120,text:"2 hours"},{minutes:150,text:"2.30 hours"},{minutes:180,text:"3 hours"},{minutes:210,text:"3.30 hours"},{minutes:240,text:"4 hours"},{minutes:270,text:"4.30 hours"},{minutes:300,text:"5 hours"}],B=({showPopUpType:r="Task",setShowPopUpType:c,date:b,time:v,title:a="",description:j="",duration:C,_id:p=null})=>{const[f,m]=l.useState(!1),[Y,y]=l.useState(s()),[g,h]=l.useState(!1),[i,n]=l.useState({type:r,title:a,description:j,duration:C,date:b,time:v}),{updateCalendar:u}=l.useContext(R),d=l.useRef(null),x=l.useRef(null);l.useEffect(()=>{function t(o){x.current&&!x.current.contains(o.target)&&m(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[x]),l.useEffect(()=>{function t(o){x.current&&!d.current.contains(o.target)&&h(!1)}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[d]);const N=t=>{const o=t.target.name,w=t.target.value;n({...i,[o]:w})},L=async t=>{t.preventDefault(),p?(u(p,i),c(null)):await S.post("/api/schedule",i).then(o=>{console.log(o.data),c(null)}).catch(o=>{console.log(o)})};return e.jsx("div",{className:"popup-overlay",children:e.jsxs("div",{className:"popup-container",children:[e.jsx(A,{className:"close-icon",onClick:()=>c(null)}),e.jsxs("form",{onSubmit:L,className:"form",children:[e.jsx("div",{className:"button-group",children:["Task","Calling","Meeting"].map((t,o,w)=>e.jsx("button",{type:"button",className:i.type===t?"active":"",onClick:()=>n({...i,type:t}),children:t},o))}),e.jsx("input",{type:"text",id:"title",name:"title",value:i.title,className:"input-field",placeholder:"Title",onChange:N,required:!0}),e.jsxs("div",{className:"relative-container",ref:x,children:[e.jsxs("div",{className:"input-group",onClick:()=>m(!f),children:[e.jsx("span",{children:"ðŸ“…"}),e.jsx("input",{type:"text",id:"ReminderTime",className:"input-field",placeholder:"Select Reminder time",onChange:()=>{},value:`${i.date} | ${i.time}`,required:!0})]}),e.jsxs("div",{ref:d,className:"dropdown",children:[e.jsxs("button",{onClick:()=>h(!g),type:"button",children:[i.duration?M.find(t=>t.minutes===i.duration).text:"Select Duration"," ",e.jsx(O,{className:"dropdown-icon"})]}),g&&e.jsx("div",{className:"dropdown-content",children:e.jsx("ul",{children:M.map((t,o)=>e.jsx("li",{className:t.minutes===i.duration?"selected":"",onClick:()=>{n({...i,duration:t.minutes}),h(!1)},children:t.text},o))})})]}),f&&e.jsx(z,{inputData:i,setInputData:n,date:b,time:v,fullDate:Y,setFullDate:y,setDatePicker:m})]}),e.jsx("textarea",{name:"description",value:i.description,onChange:N,id:"description",placeholder:"Description",className:"textarea-field"}),e.jsx("div",{className:"submit-container",children:e.jsx("button",{type:"submit",className:"submit-button",children:"Add"})})]})]})})};export{B as P,O as R};
