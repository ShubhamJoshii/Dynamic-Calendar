import{d as a,u as E,t as P,r,C as A,j as s}from"./index-DjgXxVfn.js";import{P as F}from"./PopUp-WH6JJVy9.js";import{T as H}from"./tooltip-BhLTGUFS.js";import{g as R}from"./util-oYDmJMfv.js";import"./index-MxTyqqxA.js";a.extend(E);a.extend(P);const G=({monthIndex:c,year:y,changeCalender:g})=>{const[o,m]=r.useState({type:null,date:null,time:null}),{CalendarData:v,reScheduleCalendar:C,publicHoliday:N}=r.useContext(A),[j,b]=r.useState({id:"",title:"",date:"",time:""}),[S,Y]=r.useState(!1),T=R(c,y),D=(i,t)=>{const{_id:l,date:p,description:n,duration:d,time:f,title:h}=t;b({id:l,date:p,description:n,duration:d,time:f,title:h})};function O(i,t){a(t).diff(a(),"days")>=0&&C(j.id,t,j.time)}function U(i,t){i.preventDefault()}const $=(i,t)=>{console.log(i,t),i!==a(t).month()?i>a(t).month()?g("prev"):g("next"):a(t).diff(a(),"days")>=0&&m({type:"Task",date:a(t).format("YYYY-MM-DD"),time:""})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"calendar-container",children:[s.jsx("div",{className:"weekday-headers",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map((i,t)=>s.jsx("div",{className:"weekday-header",children:i},t))}),T.map((i,t)=>s.jsx("div",{className:"flex flex-1 justify-evenly",children:i.map((l,p)=>{const n=N.filter(e=>e.date.iso===l),d=a(l).date(),f=a(l).format("MMM");let h=v.filter(e=>e.date===a(l).format("YYYY-MM-DD"));return s.jsxs("button",{className:`calendar-day ${a(l).diff(a(),"days")<0?"bg-gray-100":""} ${c!==a(l).month()?"opacity-70":""} ${a(l).format("YYYY-MM-DD")===a().format("YYYY-MM-DD")?"today":""}`,onClick:()=>$(c,l),onDrop:e=>O(e,l),onDragOver:e=>U(e),children:[d===1?`${f} ${d}`:d,n.length>0&&n.map((e,u)=>s.jsx("div",{className:"holiday",children:s.jsx("span",{className:"holiday-name",children:e.name})},u)),s.jsx("div",{className:"schedule-data",children:h.map((e,u)=>{const M={Task:"#f5265a",Meeting:"#33ca2f",Calling:"#5abbf0"}[e.type];return s.jsxs("div",{className:"schedule-data-item",children:[s.jsx("span",{className:"schedule-data-item-title",style:{backgroundColor:M},onClick:x=>{x.stopPropagation(),Y(e._id)},draggable:a(l).diff(a(),"days")>=0,onDragStart:x=>D(x,e),children:e.title}),s.jsx(H,{isVisible:S,setIsVisible:Y,found:e,setShowPopUpType:m,color:M})]},u)})})]},p)})},t))]}),(o==null?void 0:o.type)&&s.jsx(F,{showPopUpType:o.type,setShowPopUpType:m,...o})]})};export{G as default};
